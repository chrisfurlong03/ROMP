#Monsoon Onset Metrics Package (MOMP) configuration n parameters

#=======  MOMP structure and dimension setting =======
layout = ("model", "verification_window",)  # frozen with MOMP version
model_list = ("AIFS", "NGCM",)

#====== input data and region mask ======
obs = "IMD"
obs_dir = 'data'
obs_file_pattern = ("{}.nc", "data_{}.nc")
obs_var = "RAINFALL"
obs_unit_cvt = None

ref_model = "climatology"
ref_model_dir = 'data/ref' # reference forecast model if not climatology
ref_model_file_pattern = ("{}.nc", "data_{}.nc")
ref_model_var = "RAINFALL"
ref_model_unit_cvt = None

thresh_file = "data/mwset2x2.nc4 " # set to None if using scalar threshold
thresh_var = "MWmean"

model_dir_list = ('data', '/scratch/model')
model_var_list = ("total_precipitation_24hr","tp")
unit_cvt_list = (None, 1000)
file_pattern_list = ("{}.nc", "{}.nc")

shpfile = "data/india_shapefile.shp"

region = "Ethiopia"

#====== onset definition =====
wet_init = 1 #the first wet day rainfall threshold (mm)
wet_threshold = None #set only when using scalar threshold 
wet_spell = 5 #wet spell duration -> to replace window in the code
dry_threshold = 5 #accumulated rainfall (mm) 
dry_spell = 10 #dry spell duration followed by wet spell
dry_extent = 30 #dry spell searching window after wet spell, must >=dry_spell

onset_percentage_threshold = 0.5 #for probabilistic forecast

#====== evaluation period =====

start_date = (2019, 5, 1)
end_date = (2024, 10, 31)

start_year_clim = 1980 # cliamotology period for observation data
end_year_clim  = 2000

fallback_date = (4,1) # adjust obs start_date if onset earlier than start_date

mok = (6,2) # (month, day)

years = (2019,2020,2021,2022,2023,2024) # years to included in forecast model, set to "All" if using year_start
years_clim = (2019,2020,2021,2022,2023,2024) # years to calculate climatology, set to "All" if using year_start_clim

init_days = (0, 3,) #keep the trailing comma if more than one initialization days
date_filter_year = 2024

#====== evaluation setting =====

verification_window_list = ((1,15),(16,30),) #Days after initialization to start validation window

tolerance_days_list =  (3, 5,) #Tolerance in days for onset prediction 

max_forecast_day = 15

day_bins = ((1, 5), (6, 10), (11, 15)) # for bin statistics

 
#====== metrics ======
#------ deterministic -----
FAR = True
MAE = True
MR = True
CSI = False

#------ probabilistic -----
probabilistic = False
climatology = True

members = (1,2,3,4,5)

BSS = False #Brier skill score 
RPSS = False #Ranked probability skill score 
AUC = False #Area under curve 

Reliability = False #Reliability diagrams

skill_score = True


#====== output ======
dir_out = "output"
dir_fig = "figures"

#fout_spatial_far_mr_mae = "spatial_metrics_{}.nc"

save_fig = True

save_nc_spatial_far_mr_mae = False
save_csv_score = False



#====== graphics =====
plot_spatial_far_mr_mae = False
plot_heatmap = False
plot_reliability = False
plot_portrait = False


#tolerance_day # different for verification window



